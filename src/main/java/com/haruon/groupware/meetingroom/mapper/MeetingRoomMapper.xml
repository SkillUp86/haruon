<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.haruon.groupware.meetingroom.mapper.MeetingRoomMapper">
	
	<select id="meetingroomList" resultType="com.haruon.groupware.meetingroom.dto.MeetingRoomDto">
  SELECT
        m.mee_no  meeNo,
        m.mname  mname,
        m.capacity  capacity,
        m.info  info,
        m.avail_yn  availYn,
        mf.file_name  fileName,
        mf.ext  fileExt
    FROM 
        meetingroom m
    LEFT JOIN 
        meetingroom_file mf
    ON 
        m.mee_no = mf.mee_no
    ORDER BY 
        m.mee_no ASC;
		
	</select>
<insert id="addMeetingroom" parameterType="com.haruon.groupware.meetingroom.entity.MeetingRoom" useGeneratedKeys="true" keyProperty="meeNo">
    INSERT INTO meetingroom (
        mname, 
        capacity, 
        info
    ) VALUES (
        #{mname},
        #{capacity},  
        #{info}
    )
</insert>
<insert id="addMeetingroomFile" parameterType="com.haruon.groupware.meetingroom.entity.MeetingRoomFile">
    INSERT INTO meetingroom_file (
        mee_no,
        original_name,
        file_name,
        kind,
        size,
        ext
    ) VALUES (
        #{meeNo},
        #{originalName},
        #{fileName},
        #{kind},
        #{size},
        #{ext}
    )
</insert>

<delete id="deleteMeetingroom" parameterType="Integer">
DELETE FROM meetingroom
WHERE mee_no = #{meeNo}
</delete>

</mapper>